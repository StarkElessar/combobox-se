var z=n=>{throw TypeError(n)};var H=(n,e,s)=>e.has(n)||z("Cannot "+s);var t=(n,e,s)=>(H(n,e,"read from private field"),s?s.call(n):e.get(n)),r=(n,e,s)=>e.has(n)?z("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,s),v=(n,e,s,o)=>(H(n,e,"write to private field"),o?o.call(n,s):e.set(n,s),s),u=(n,e,s)=>(H(n,e,"access private method"),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const C of l.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&o(C)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();const _="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20id='chevron-down'%3e%3cpath%20d='M233.4%20406.6c12.5%2012.5%2032.8%2012.5%2045.3%200l192-192c12.5-12.5%2012.5-32.8%200-45.3s-32.8-12.5-45.3%200L256%20338.7%2086.6%20169.4c-12.5-12.5-32.8-12.5-45.3%200s-12.5%2032.8%200%2045.3l192%20192z'%20fill='currentColor'%20/%3e%3c/svg%3e";var I,w,$,K;class j{constructor(e){r(this,$);r(this,I);r(this,w,{});v(this,I,new Proxy(e,{set:(s,o,i)=>{if(o in s){if(s[o]===i)return!0;const l=Reflect.set(s,o,i);return u(this,$,K).call(this,o,i),l}return!1}}))}get(e){return t(this,I)[e]}set(e,s){t(this,I)[e]=s}subscribe(e,s){var o,i;(o=t(this,w))[e]??(o[e]=[]),(i=t(this,w)[e])==null||i.push(s)}}I=new WeakMap,w=new WeakMap,$=new WeakSet,K=function(e,s){var o;(o=t(this,w)[e])==null||o.forEach(i=>i(s))};const G={wrapperClass:"combobox-se-wrapper",inputClass:"combobox-se-input",inputWrapperClass:"combobox-se-input-wrapper",triggerClass:"combobox-se-trigger",dropdownClass:"combobox-se-dropdown",dropdownVisibleClass:"combobox-se-dropdown-visible",listClass:"combobox-se-list",itemClass:"combobox-se-item",selectedItemClass:"combobox-se-selected",emptyItemClass:"combobox-se-empty-item",placeholder:"Введите значение",emptyPlaceholder:"Нет элементов для отображения",onInit:()=>{}},J={isOpen:null,selectedItem:null};var p,h,L,O,b,g,f,a,E,T,c,R,A,D,x,V,q,B,N,F,U,S;const y=class y{constructor(e,s){r(this,c);r(this,p);r(this,h);r(this,L,document.createElement("span"));r(this,O,document.createElement("span"));r(this,b,document.createElement("button"));r(this,g,document.createElement("div"));r(this,f,document.createElement("ul"));r(this,a);r(this,E,{});r(this,A,e=>{const{dropdownVisibleClass:s}=t(this,p);e?(t(this,g).classList.add(s),document.addEventListener("click",t(this,N)),t(this,V).call(this),u(this,c,S).call(this,"open",{sender:this,isOpen:!0})):(t(this,g).classList.remove(s),document.removeEventListener("click",t(this,N)),u(this,c,S).call(this,"close",{sender:this,isOpen:!1}))});r(this,D,e=>{e&&(u(this,c,U).call(this,e.text),u(this,c,x).call(this,t(this,p).dataItems),u(this,c,S).call(this,"change",{sender:this,dataItem:e}))});r(this,V,()=>{const e=`.${t(this,p).selectedItemClass}`,s=t(this,f).querySelector(e);s==null||s.scrollIntoView({behavior:"smooth",block:"nearest"})});r(this,q,()=>{var i;const e=((i=t(this,h))==null?void 0:i.value.trim().toLowerCase())||"",s=t(this,p).dataItems;if(e===""){u(this,c,x).call(this,s);return}const o=s.filter(l=>l.text.toLowerCase().includes(e)||l.value.toLowerCase().includes(e));u(this,c,x).call(this,o)});r(this,B,()=>{const e=t(this,a).get("isOpen");t(this,a).set("isOpen",!e)});r(this,N,({target:e})=>{e instanceof Node&&!t(this,L).contains(e)&&t(this,a).set("isOpen",!1)});r(this,F,e=>{t(this,a).set("selectedItem",e),t(this,a).set("isOpen",!1)});var o,i;if(v(this,h,e instanceof HTMLInputElement?e:document.querySelector(e)),!t(this,h))throw new Error(`No input element found for selector "${e}"`);if(!t(this,h).name)throw new Error(`No input name found for selector "${e}"`);v(this,p,{...G,...s}),v(this,a,new j(J)),t(this,a).subscribe("isOpen",t(this,A)),t(this,a).subscribe("selectedItem",t(this,D)),u(this,c,R).call(this,t(this,h)),(i=(o=t(this,p)).onInit)==null||i.call(o,{sender:this,input:t(this,h)}),t(y,T).set(t(this,h).id,this)}static get(e){return t(y,T).get(e)??null}bind(e,s){var o,i;(o=t(this,E))[e]??(o[e]=[]),(i=t(this,E)[e])==null||i.push(s)}};p=new WeakMap,h=new WeakMap,L=new WeakMap,O=new WeakMap,b=new WeakMap,g=new WeakMap,f=new WeakMap,a=new WeakMap,E=new WeakMap,T=new WeakMap,c=new WeakSet,R=function(e){var d,m;const{wrapperClass:s,inputClass:o,placeholder:i,inputWrapperClass:l,dropdownClass:C,triggerClass:M,listClass:P}=t(this,p);t(this,L).classList.add(s),e.classList.add(o),e.placeholder=((d=t(this,h))==null?void 0:d.placeholder)||i,e.autocomplete="off",e.addEventListener("input",t(this,q)),e.addEventListener("focus",()=>e.select()),e.addEventListener("click",()=>t(this,a).set("isOpen",!0)),(m=e.parentNode)==null||m.insertBefore(t(this,L),e),t(this,b).classList.add(M),t(this,b).type="button",t(this,b).innerHTML=`<img src="${_}" width="12" height="12" alt="chevron icon">`,t(this,b).addEventListener("click",t(this,B)),t(this,O).classList.add(l),t(this,O).append(e,t(this,b)),t(this,f).classList.add(P),t(this,g).classList.add(C),t(this,g).appendChild(t(this,f)),t(this,L).append(t(this,O),t(this,g)),u(this,c,x).call(this,t(this,p).dataItems),t(this,a).set("isOpen",!1)},A=new WeakMap,D=new WeakMap,x=function(e){var P;const{itemClass:s,selectedItemClass:o,emptyPlaceholder:i,emptyItemClass:l}=t(this,p),C=(P=t(this,a).get("selectedItem"))==null?void 0:P.id,M=document.createDocumentFragment();if(t(this,f).innerHTML="",e.length===0){const d=document.createElement("li");d.classList.add(l),d.textContent=i,d.dataset.placeholder="true",t(this,f).appendChild(d);return}e.forEach(d=>{const m=document.createElement("li");m.classList.add(s),m.dataset.id=String(d.id),m.dataset.value=d.value,m.textContent=d.text,m.classList.toggle(o,d.id===C),m.addEventListener("click",()=>t(this,F).call(this,d)),M.appendChild(m)}),t(this,f).appendChild(M)},V=new WeakMap,q=new WeakMap,B=new WeakMap,N=new WeakMap,F=new WeakMap,U=function(e){t(this,h)&&e&&(t(this,h).value=e)},S=function(e,s){var o;(o=t(this,E)[e])==null||o.forEach(i=>i(s))},r(y,T,new Map);let W=y;document.addEventListener("DOMContentLoaded",()=>{console.log("DOMContentLoaded");const n=new W("#type",{onInit(e){console.log("onInit",e)},dataItems:[...Array(20).fill(null)].map((e,s)=>({id:s+1,text:`Item ${s+1}`,value:`item_${s+1}`}))});n.bind("open",e=>{console.log("Combobox is Opened",e)}),n.bind("close",e=>{console.log("Combobox is Closed",e)}),n.bind("change",e=>{console.log("Combobox change",e)})});
