var W=o=>{throw TypeError(o)};var F=(o,e,s)=>e.has(o)||W("Cannot "+s);var t=(o,e,s)=>(F(o,e,"read from private field"),s?s.call(o):e.get(o)),r=(o,e,s)=>e.has(o)?W("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,s),E=(o,e,s,n)=>(F(o,e,"write to private field"),n?n.call(o,s):e.set(o,s),s),f=(o,e,s)=>(F(o,e,"access private method"),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const C of l.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&n(C)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();const R="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20id='chevron-down'%3e%3cpath%20d='M233.4%20406.6c12.5%2012.5%2032.8%2012.5%2045.3%200l192-192c12.5-12.5%2012.5-32.8%200-45.3s-32.8-12.5-45.3%200L256%20338.7%2086.6%20169.4c-12.5-12.5-32.8-12.5-45.3%200s-12.5%2032.8%200%2045.3l192%20192z'%20fill='currentColor'%20/%3e%3c/svg%3e";var I,w,P,B;class U{constructor(e){r(this,P);r(this,I);r(this,w,{});E(this,I,new Proxy(e,{set:(s,n,i)=>{if(n in s){if(s[n]===i)return!0;const l=Reflect.set(s,n,i);return f(this,P,B).call(this,n,i),l}return!1}}))}get(e){return t(this,I)[e]}set(e,s){t(this,I)[e]=s}subscribe(e,s){var n,i;(n=t(this,w))[e]??(n[e]=[]),(i=t(this,w)[e])==null||i.push(s)}}I=new WeakMap,w=new WeakMap,P=new WeakSet,B=function(e,s){var n;(n=t(this,w)[e])==null||n.forEach(i=>i(s))};const _={wrapperClass:"combobox-se-wrapper",inputClass:"combobox-se-input",inputWrapperClass:"combobox-se-input-wrapper",triggerClass:"combobox-se-trigger",dropdownClass:"combobox-se-dropdown",dropdownVisibleClass:"combobox-se-dropdown-visible",listClass:"combobox-se-list",itemClass:"combobox-se-item",selectedItemClass:"combobox-se-selected",emptyItemClass:"combobox-se-empty-item",placeholder:"Введите значение",emptyPlaceholder:"Нет элементов для отображения",onInit:()=>{}},j={isOpen:null,selectedItem:null};var h,d,L,v,g,b,m,c,y,u,z,S,$,O,A,D,V,T,q,K;const x=class x{constructor(e,s){r(this,u);r(this,h);r(this,d);r(this,L,document.createElement("span"));r(this,v,document.createElement("span"));r(this,g,document.createElement("button"));r(this,b,document.createElement("div"));r(this,m,document.createElement("ul"));r(this,c);r(this,S,e=>{const{dropdownVisibleClass:s}=t(this,h);e?(t(this,b).classList.add(s),document.addEventListener("click",t(this,T)),t(this,A).call(this)):(t(this,b).classList.remove(s),document.removeEventListener("click",t(this,T)))});r(this,$,e=>{f(this,u,K).call(this,e==null?void 0:e.text),f(this,u,O).call(this,t(this,h).dataItems)});r(this,A,()=>{const e=`.${t(this,h).selectedItemClass}`,s=t(this,m).querySelector(e);s==null||s.scrollIntoView({behavior:"smooth",block:"nearest"})});r(this,D,()=>{var i;const e=((i=t(this,d))==null?void 0:i.value.trim().toLowerCase())||"",s=t(this,h).dataItems;if(e===""){f(this,u,O).call(this,s);return}const n=s.filter(l=>l.text.toLowerCase().includes(e)||l.value.toLowerCase().includes(e));f(this,u,O).call(this,n)});r(this,V,()=>{const e=t(this,c).get("isOpen");t(this,c).set("isOpen",!e)});r(this,T,({target:e})=>{e instanceof Node&&!t(this,L).contains(e)&&t(this,c).set("isOpen",!1)});r(this,q,e=>{t(this,c).set("selectedItem",e),t(this,c).set("isOpen",!1)});var n,i;if(E(this,d,e instanceof HTMLInputElement?e:document.querySelector(e)),!t(this,d))throw new Error(`No input element found for selector "${e}"`);if(!t(this,d).name)throw new Error(`No input name found for selector "${e}"`);E(this,h,{..._,...s}),E(this,c,new U(j)),t(this,c).subscribe("isOpen",t(this,S)),t(this,c).subscribe("selectedItem",t(this,$)),f(this,u,z).call(this,t(this,d)),(i=(n=t(this,h)).onInit)==null||i.call(n,{sender:this,input:t(this,d)}),t(x,y).set(t(this,d).id,this)}static get(e){return t(x,y).get(e)??null}};h=new WeakMap,d=new WeakMap,L=new WeakMap,v=new WeakMap,g=new WeakMap,b=new WeakMap,m=new WeakMap,c=new WeakMap,y=new WeakMap,u=new WeakSet,z=function(e){var a,p;const{wrapperClass:s,inputClass:n,placeholder:i,inputWrapperClass:l,dropdownClass:C,triggerClass:N,listClass:M}=t(this,h);t(this,L).classList.add(s),e.classList.add(n),e.placeholder=((a=t(this,d))==null?void 0:a.placeholder)||i,e.autocomplete="off",e.addEventListener("input",t(this,D)),e.addEventListener("focus",()=>e.select()),e.addEventListener("click",()=>t(this,c).set("isOpen",!0)),(p=e.parentNode)==null||p.insertBefore(t(this,L),e),t(this,g).classList.add(N),t(this,g).type="button",t(this,g).innerHTML=`<img src="${R}" width="12" height="12" alt="chevron icon">`,t(this,g).addEventListener("click",t(this,V)),t(this,v).classList.add(l),t(this,v).append(e,t(this,g)),t(this,m).classList.add(M),t(this,b).classList.add(C),t(this,b).appendChild(t(this,m)),t(this,L).append(t(this,v),t(this,b)),f(this,u,O).call(this,t(this,h).dataItems),t(this,c).set("isOpen",!1)},S=new WeakMap,$=new WeakMap,O=function(e){var M;const{itemClass:s,selectedItemClass:n,emptyPlaceholder:i,emptyItemClass:l}=t(this,h),C=(M=t(this,c).get("selectedItem"))==null?void 0:M.id,N=document.createDocumentFragment();if(t(this,m).innerHTML="",e.length===0){const a=document.createElement("li");a.classList.add(l),a.textContent=i,a.dataset.placeholder="true",t(this,m).appendChild(a);return}e.forEach(a=>{const p=document.createElement("li");p.classList.add(s),p.dataset.id=String(a.id),p.dataset.value=a.value,p.textContent=a.text,p.classList.toggle(n,a.id===C),p.addEventListener("click",()=>t(this,q).call(this,a)),N.appendChild(p)}),t(this,m).appendChild(N)},A=new WeakMap,D=new WeakMap,V=new WeakMap,T=new WeakMap,q=new WeakMap,K=function(e){t(this,d)&&e&&(t(this,d).value=e)},r(x,y,new Map);let H=x;document.addEventListener("DOMContentLoaded",()=>{console.log("DOMContentLoaded"),new H("#type",{onInit(o){console.log("onInit",o)},dataItems:[...Array(20).fill(null)].map((o,e)=>({id:e+1,text:`Item ${e+1}`,value:`item_${e+1}`}))})});
